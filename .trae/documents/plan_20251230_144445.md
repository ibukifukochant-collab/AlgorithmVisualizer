# 可视化算法网站设计方案

## 技术栈
- **后端**: Node.js + Express.js
- **前端**: HTML5 + CSS3 + JavaScript (原生)
- **UI 框架**: UIverse (https://uiverse.io/)
- **IOC 容器**: 自定义实现，支持插件动态加载
- **构建工具**: None (纯静态 + Node.js 服务)

## 项目目录结构
```
algoShow/
├── server.js                  # Node.js 服务器入口
├── package.json               # 项目依赖配置
├── ioc/                       # IOC 容器实现
│   └── container.js
├── plugins/                   # 插件目录（存放各种算法插件）
│   ├── example-plugin/        # 示例插件
│   │   ├── manifest.json      # 插件元数据
│   │   ├── algorithm.js       # 算法实现
│   │   ├── visualization.js   # 可视化逻辑
│   │   ├── style.css          # 插件样式
│   │   └── index.html         # 插件页面
│   └── ...
├── public/                    # 静态资源
│   ├── css/
│   │   └── main.css           # 主样式
│   ├── js/
│   │   ├── main.js            # 主逻辑
│   │   └── utils.js           # 工具函数
│   └── index.html             # 主页面
└── utils/                     # 工具函数
    └── pluginLoader.js        # 插件加载器
```

## 核心设计

### 1. IOC 容器设计
- 实现依赖注入机制，支持插件的动态注册和解析
- 提供插件生命周期管理（初始化、启动、停止、销毁）
- 支持插件间的依赖关系处理

### 2. 插件规范
每个算法插件必须包含以下文件：
- **manifest.json**: 插件元数据，包含名称、描述、版本、作者等信息
- **algorithm.js**: 算法核心实现，暴露算法函数
- **visualization.js**: 可视化逻辑，负责将算法执行过程可视化
- **style.css**: 插件专属样式
- **index.html**: 插件的独立展示页面

### 3. 插件加载流程
1. 服务器启动时，扫描 plugins 目录
2. 读取每个插件的 manifest.json
3. 验证插件合法性
4. 将插件信息注册到 IOC 容器
5. 前端请求时，动态生成插件列表

### 4. 主页面设计
- 使用 UIverse 的卡片组件展示算法方格
- 每个方格包含算法名称、描述、缩略图和启动按钮
- 支持分类筛选和搜索功能
- 响应式设计，适配不同屏幕尺寸

### 5. 算法可视化框架
- 提供统一的画布接口，支持 2D/3D 可视化
- 支持算法执行过程的步进、暂停、加速、减速
- 提供代码高亮和执行过程同步展示
- 支持结果对比和分析

## 实现步骤

1. **初始化项目**
   - 创建 package.json
   - 安装 Express.js
   - 创建基础目录结构

2. **实现 IOC 容器**
   - 创建 container.js
   - 实现依赖注入、注册、解析功能

3. **实现插件加载器**
   - 创建 pluginLoader.js
   - 实现插件扫描、验证、注册逻辑

4. **创建主页面**
   - 设计响应式布局
   - 集成 UIverse 组件
   - 实现算法方格展示

5. **实现 Node.js 服务器**
   - 配置路由
   - 实现静态文件服务
   - 实现插件 API

6. **创建示例插件**
   - 实现一个简单的算法（如冒泡排序）
   - 实现可视化逻辑
   - 测试插件加载和运行

7. **完善功能**
   - 添加分类筛选功能
   - 添加搜索功能
   - 完善可视化控制

## 插件开发规范

### manifest.json 示例
```json
{
  "name": "Bubble Sort",
  "description": "冒泡排序算法可视化",
  "version": "1.0.0",
  "author": "Author Name",
  "category": "Sorting",
  "thumbnail": "thumbnail.png",
  "main": "algorithm.js",
  "visualization": "visualization.js",
  "style": "style.css",
  "entry": "index.html"
}
```

### 算法实现示例
```javascript
// algorithm.js
export function bubbleSort(arr) {
  const steps = [];
  // 算法实现，记录每一步的状态
  return steps;
}

export default {
  name: 'Bubble Sort',
  run: bubbleSort,
  complexity: {
    time: 'O(n²)',
    space: 'O(1)'
  }
};
```

### 可视化实现示例
```javascript
// visualization.js
export function visualize(canvas, steps) {
  // 使用 Canvas API 实现可视化
}

export default {
  init: (canvas) => {},
  render: visualize,
  destroy: () => {}
};
```

## 预期功能
- ✅ 支持多种算法的可视化展示
- ✅ 插件化架构，易于扩展
- ✅ 响应式设计，适配不同设备
- ✅ 算法执行过程可控（步进、暂停、加速等）
- ✅ 代码高亮和执行过程同步
- ✅ 支持算法复杂度分析

## 扩展性设计
- 支持 3D 可视化扩展
- 支持算法性能分析
- 支持多种数据结构可视化
- 支持自定义主题

这个设计方案将实现一个高度可扩展的可视化算法网站，采用插件化架构和 IOC 理念，使得添加新算法变得非常简单，只需将符合规范的插件文件夹放入 plugins 目录即可。